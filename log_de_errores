root@ac54e21acd06:/var/www/html# curl -v https://api.wordpress.org
*   Trying 198.143.164.251:443...
* Connected to api.wordpress.org (198.143.164.251) port 443 (#0)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
* TLSv1.3 (IN), TLS handshake, Server hello (2):
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
* TLSv1.3 (IN), TLS handshake, Certificate (11):
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
* TLSv1.3 (IN), TLS handshake, Finished (20):
* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
* TLSv1.3 (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN, server accepted to use http/1.1
* Server certificate:
*  subject: CN=wordpress.org
*  start date: Sep 28 19:43:55 2025 GMT
*  expire date: Dec 27 19:43:54 2025 GMT
*  subjectAltName: host "api.wordpress.org" matched cert's "*.wordpress.org"
*  issuer: C=US; O=Let's Encrypt; CN=E7
*  SSL certificate verify ok.
> GET / HTTP/1.1
> Host: api.wordpress.org
> User-Agent: curl/7.74.0
> Accept: */*
> 
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* old SSL session ID is stale, removing
* Mark bundle as not supporting multiuse
< HTTP/1.1 302 Found
< Server: nginx
< Date: Fri, 10 Oct 2025 15:18:09 GMT
< Content-Type: text/html; charset=utf-8
< Transfer-Encoding: chunked
< Connection: close
< Location: https://developer.wordpress.org/rest-api/
< X-Frame-Options: SAMEORIGIN
< Alt-Svc: h3=":443"; ma=86400
< X-nc:  ord 3
< 
* Closing connection 0
* TLSv1.3 (OUT), TLS alert, close notify (256):





/root/wordpress_init.sh: line 10: : Name or service not known
/root/wordpress_init.sh: line 10: /dev/tcp//3306: Invalid argument


Downloading WordPress 6.8.3 (en_US)...
md5 hash verified: d2c8b06fa3875fb890e3fa8fdbbc42fb
Success: WordPress downloaded.
waiting for MariaDB to accept connections
MariaDB is ready!
Error: Database connection error (1045) Access denied for user ''@'wordpress.inception_net' (using password: YES)
Error: 'wp-config.php' not found.
Either create one manually or use `wp config create`.
Error: 'wp-config.php' not found.
Either create one manually or use `wp config create`.
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...
Error: WordPress files seem to already be present here.
Waiting for network...




#! /bin/bash

if [ -f wp-config.php ]; then return 0; fi

until wp core download --allow-root; do
	echo "Waiting for network..."
	sleep 3
done

echo "waiting for MariaDB to accept connections"
while ! exec 3<>/dev/tcp/$DATABASE_HOST/3306; do
	sleep 3
done
echo "MariaDB is ready!"
wp config create --dbname=$DATABASE_NAME \
		 --dbuser=$DATABASE_USER_NAME \
		 --dbpass=$DATABASE_USER_PASSWORD \
		 --dbhost=$DATABASE_HOST \
		 --allow-root
wp core install --url=$DOMAIN_NAME --title="$WORDPRESS_TITLE" --admin_user=$WORDPRESS_ADMIN_USER --admin_password=$WORDPRESS_ADMIN_PASSWORD --allow-root
wp user create $WORDPRESS_AUTHOR_USER $WORDPRESS_AUTHOR_EMAIL --role=author --user_pass=$WORDPRESS_AUTHOR_PASSWORD --allow-root

exec "$@"
martalc@debian

Downloading WordPress 6.8.3 (en_US)...
md5 hash verified: d2c8b06fa3875fb890e3fa8fdbbc42fb
Success: WordPress downloaded.
waiting for MariaDB to accept connections
MariaDB is ready!
Success: Generated 'wp-config.php' file.
Error: Parameter errors:
 missing --admin_email parameter (The email address for the admin user.)
Error: The site you have requested is not installed.
Run `wp core install` to create database tables.

Error in wordpress dockerfile:
"Step 7/11 : COPY --chmod=700 wordpress_init.sh /root/wordpress_init.sh the --chmod option requires BuildKit. Refer to https://docs.docker.com/go/buildkit/ to learn how to build images with BuildKit enabled"

esto me pasaba porque usaba --chmod. esta flag es avanzada y solo esta en BuildKit, que no quiero instalar, asi que usando la alternativa:
COPY wordpress_init.sh /root/wordpress_init.sh
RUN chmod 700 /root/wordpress_init.sh
se arregla el problema.

